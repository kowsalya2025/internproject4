<!DOCTYPE html>
<html>
<head>
    <title>Create Exam - Debug</title>
    <style>
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h2>Create Exam (Debug Mode)</h2>
    
    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        
        <p>
            <label>Title:</label><br>
            <input type="text" name="title" required>
        </p>
        
        <p>
            <label>Subject:</label><br>
            <select name="subject" required>
                <option value="">Select Subject</option>
                {% for subject in teacher_subjects %}
                    <option value="{{ subject.id }}">{{ subject.name }}</option>
                {% endfor %}
            </select>
        </p>
        
        <p>
            <label>Description:</label><br>
            <textarea name="description" rows="3"></textarea>
        </p>
        
        <p>
            <label>Duration (minutes):</label><br>
            <input type="number" name="duration" value="60" required>
        </p>
        
        <p>
            <label>Total Marks:</label><br>
            <input type="number" name="total_marks" value="100" required>
        </p>
        
        <p>
            <label>Passing Marks:</label><br>
            <input type="number" name="passing_marks" value="40" required>
        </p>
        
        <p>
            <label>Difficulty:</label><br>
            <select name="difficulty">
                <option value="easy">Easy</option>
                <option value="medium" selected>Medium</option>
                <option value="hard">Hard</option>
            </select>
        </p>
        
        <p>
            <label>Start Time:</label><br>
            <input type="datetime-local" name="start_time" required>
        </p>
        
        <p>
            <label>End Time:</label><br>
            <input type="datetime-local" name="end_time" required>
        </p>
        
        <button type="submit">Create Exam</button>
    </form>
    
    <hr>
    <h3>Debug Info:</h3>
    <p>Teacher: {{ request.user.username }}</p>
    <p>Subjects available: {{ teacher_subjects.count }}</p>
    <ul>
        {% for subject in teacher_subjects %}
            <li>{{ subject.id }} - {{ subject.name }} ({{ subject.code }})</li>
        {% empty %}
            <li>No subjects found!</li>
        {% endfor %}
    </ul>
</body>
</html>